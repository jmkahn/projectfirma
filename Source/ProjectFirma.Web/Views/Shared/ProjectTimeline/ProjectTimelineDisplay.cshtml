 @*-----------------------------------------------------------------------
    <copyright file="ProjectContactsDetail.cshtml" company="Tahoe Regional Planning Agency and Sitka Technology Group">
    Copyright (c) Tahoe Regional Planning Agency and Sitka Technology Group. All rights reserved.
    <author>Sitka Technology Group</author>
    </copyright>

    <license>
    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU Affero General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU Affero General Public License <http://www.gnu.org/licenses/> for more details.

    Source code is available upon request via <support@sitkatech.com>.
    </license>
    -----------------------------------------------------------------------*@
@using System.Globalization
@using ProjectFirmaModels.Models
@using LtInfo.Common.Views
@using ProjectFirma.Web.Common
@using ProjectFirma.Web.Models
@using ProjectFirma.Web.Views.Shared.ProjectTimeline
@inherits ProjectFirma.Web.Views.Shared.ProjectTimeline.ProjectTimelineDisplay

 <style>
     
 </style>
 

 @if (ViewDataTyped.ProjectTimeline != null)
 {
     <div class="row pull-right">
         <span style="margin-right: 15px;"> @ViewDataTyped.AddProjectProjectStatusButton</span>
        
     </div>
     var groupedTimelineEvents = ViewDataTyped.ProjectTimeline.GetGroupedTimelineEvents();
     <div class="project-timeline-wrapper">
         @foreach (var yearGroup in groupedTimelineEvents)
         {
             <div class="timeline-year-group">
                 <button class="timeline-button"><span class="glyphicon glyphicon-resize-full" aria-hidden="true"></span>@yearGroup.Key</button>
                 @foreach (var quarterGroup in yearGroup)
                 {
                     <div class="timeline-quarter-group">
                         <button class="timeline-button"><span class="glyphicon glyphicon-resize-full" aria-hidden="true"></span>@quarterGroup.Key.Quarter Quarter</button>
                         @foreach (var dayGroup in quarterGroup)
                         {
                             var dayGroupDateTime = new DateTime(dayGroup.Key.Year, dayGroup.Key.Month, dayGroup.Key.Day);
                             <div class="timeline-day-group">
                                 <div class="timeline-day-group-label">
                                     <span class="timeline-day-group-label-day">@dayGroupDateTime.Day</span>
                                     <span class="timeline-day-group-label-month">@dayGroupDateTime.ToString("MMM", CultureInfo.InvariantCulture)</span>
                                 </div>
                                 @foreach (var projectTimelineEvent in dayGroup)
                                 {
                                     <div class="timeline-event-wrapper">
                                         <div class="@(projectTimelineEvent.ProjectTimelineSide == ProjectTimelineSide.Left ? "timeline-event-left" : "timeline-event-right")">
                                             <div class="timeline-event-header">
                                                 <span class="timeline-event-edit-link">@projectTimelineEvent.EditButton</span>
                                                 <span class="timeline-event-type">@projectTimelineEvent.TimelineEventTypeDisplayName</span>
                                                 <span class="timeline-event-date">@projectTimelineEvent.Date.ToString("MMM dd, yyyy h:mm tt")</span>
                                             </div>
                                             
                                             @projectTimelineEvent.TimelineEventPersonDisplayName
                                         </div>
                                     </div>
                                 }
                             </div>
                         }
                     </div>
                 }
             </div>
         }
     </div>
 }
